# 云端应用测试报告

**测试日期**: 2026-01-20  
**测试人员**: AI Assistant  
**项目**: 历史年表网站  
**部署架构**: GitHub Pages（前端） + Vercel（后端 API）

---

## 📋 测试概述

本次测试旨在验证时间轴网站在云端部署环境下的所有功能是否正常工作，包括前端页面加载、后端 API 功能、用户认证、收藏功能等。

---

## 🌐 部署信息

### 前端部署（GitHub Pages）

- **部署地址**: https://californiafinch.github.io/timeline-app/
- **部署方式**: GitHub Actions 自动部署
- **部署分支**: gh-pages
- **触发条件**: main 分支推送

### 后端部署（Vercel）

- **API 地址**: https://timeline-app-one.vercel.app/api
- **部署方式**: Vercel 自动部署
- **部署分支**: main
- **触发条件**: GitHub 仓库推送

### 数据库（Supabase）

- **数据库类型**: PostgreSQL
- **服务提供商**: Supabase
- **RLS 策略**: 已启用
- **缓存配置**: 5 分钟缓存

---

## ✅ 测试清单

### 1. 基础可访问性测试

#### 1.1 前端页面可访问性

- [ ] 测试 GitHub Pages 页面是否可以正常访问
- [ ] 检查页面加载速度（目标：< 3 秒）
- [ ] 验证所有静态资源（CSS、JS、图片）是否正确加载
- [ ] 检查浏览器控制台是否有错误

**测试方法**:
1. 访问 https://californiafinch.github.io/timeline-app/
2. 使用浏览器开发者工具检查网络请求
3. 检查控制台是否有 JavaScript 错误

**预期结果**:
- 页面正常加载，无 404 或 500 错误
- 所有静态资源正确加载
- 控制台无 JavaScript 错误

#### 1.2 后端 API 可访问性

- [ ] 测试 Vercel API 根路径是否可以正常访问
- [ ] 检查 API 响应时间（目标：< 1 秒）
- [ ] 验证 API 返回正确的状态码

**测试方法**:
1. 访问 https://timeline-app-one.vercel.app/api/
2. 使用 curl 或 Postman 测试 API 端点
3. 检查响应时间和状态码

**预期结果**:
- API 正常响应，返回 timeline.html
- 响应时间 < 1 秒
- 状态码为 200

---

### 2. 用户认证功能测试

#### 2.1 用户注册功能

- [ ] 测试用户注册 API 端点
- [ ] 验证用户名验证规则（最多 16 字符）
- [ ] 验证邮箱格式验证
- [ ] 验证密码强度验证（8-16 位，包含大小写字母）
- [ ] 验证重复用户名检查
- [ ] 验证密码加密存储

**测试方法**:
```bash
curl -X POST https://timeline-app-one.vercel.app/api/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "test_user",
    "password": "Test1234",
    "email": "test@example.com",
    "avatar": "blue"
  }'
```

**预期结果**:
- 返回状态码 200
- 返回消息："注册成功"
- 返回用户信息（ID、用户名）
- 数据库中用户密码已加密

#### 2.2 用户登录功能

- [ ] 测试用户登录 API 端点
- [ ] 验证用户名密码验证
- [ ] 验证 JWT Token 生成
- [ ] 验证 Token 有效期（7 天）
- [ ] 测试错误密码处理

**测试方法**:
```bash
curl -X POST https://timeline-app-one.vercel.app/api/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "test_user",
    "password": "Test1234"
  }'
```

**预期结果**:
- 返回状态码 200
- 返回消息："登录成功"
- 返回 JWT Token
- 返回用户信息（ID、用户名、邮箱、头像）

#### 2.3 获取用户信息功能

- [ ] 测试获取用户信息 API 端点
- [ ] 验证 Token 认证
- [ ] 验证用户数据返回
- [ ] 测试无效 Token 处理

**测试方法**:
```bash
curl -X GET https://timeline-app-one.vercel.app/api/user \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

**预期结果**:
- 返回状态码 200
- 返回用户信息（ID、用户名、邮箱、头像）
- 无效 Token 返回 401 状态码

---

### 3. 收藏功能测试

#### 3.1 添加收藏功能

- [ ] 测试添加收藏 API 端点
- [ ] 验证 Token 认证
- [ ] 验证收藏类型支持（事件、人物、年份）
- [ ] 验证重复收藏检查
- [ ] 测试数据库插入

**测试方法**:
```bash
curl -X POST https://timeline-app-one.vercel.app/api/favorites \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -d '{
    "type": "event",
    "id": "test_event_1"
  }'
```

**预期结果**:
- 返回状态码 200
- 返回消息："收藏成功"
- 数据库中正确插入收藏记录

#### 3.2 获取收藏列表功能

- [ ] 测试获取收藏列表 API 端点
- [ ] 验证 Token 认证
- [ ] 验证收藏数据返回
- [ ] 验证收藏分类（事件、人物、年份）

**测试方法**:
```bash
curl -X GET https://timeline-app-one.vercel.app/api/favorites \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

**预期结果**:
- 返回状态码 200
- 返回收藏数据（events、characters、years 数组）
- 收藏数据格式正确

#### 3.3 删除收藏功能

- [ ] 测试删除收藏 API 端点
- [ ] 验证 Token 认证
- [ ] 验证数据库删除
- [ ] 验证缓存清理

**测试方法**:
```bash
curl -X DELETE https://timeline-app-one.vercel.app/api/favorites \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -d '{
    "type": "event",
    "id": "test_event_1"
  }'
```

**预期结果**:
- 返回状态码 200
- 返回消息："删除成功"
- 数据库中正确删除收藏记录

---

### 4. 前端功能测试

#### 4.1 时间轴渲染

- [ ] 测试时间轴是否正确渲染
- [ ] 验证事件卡片显示
- [ ] 验证年份标记显示
- [ ] 验证时间轴线条显示
- [ ] 测试滚动功能

**测试方法**:
1. 访问前端页面
2. 检查时间轴元素是否正确渲染
3. 测试滚动功能
4. 检查事件卡片和年份标记

**预期结果**:
- 时间轴正确渲染
- 事件卡片正常显示
- 年份标记正常显示
- 时间轴线条正常显示
- 滚动功能正常

#### 4.2 搜索功能

- [ ] 测试搜索输入框
- [ ] 验证搜索结果高亮
- [ ] 验证搜索词高亮
- [ ] 测试无结果提示

**测试方法**:
1. 在搜索框输入搜索词
2. 点击搜索按钮或按回车键
3. 检查搜索结果
4. 检查搜索词高亮

**预期结果**:
- 搜索功能正常
- 搜索结果正确显示
- 搜索词正确高亮
- 无结果时显示提示

#### 4.3 分类筛选功能

- [ ] 测试分类筛选器
- [ ] 验证政治事件筛选
- [ ] 验证文化事件筛选
- [ ] 验证科技事件筛选
- [ ] 验证军事事件筛选

**测试方法**:
1. 选择不同的分类
2. 检查筛选结果
3. 验证事件卡片分类标识

**预期结果**:
- 分类筛选功能正常
- 筛选结果正确
- 事件卡片分类标识正确

#### 4.4 缩放功能

- [ ] 测试放大按钮
- [ ] 测试缩小按钮
- [ ] 验证缩放级别显示
- [ ] 验证缩放范围（80%-150%）

**测试方法**:
1. 点击放大按钮
2. 点击缩小按钮
3. 检查缩放级别显示
4. 检查时间轴缩放效果

**预期结果**:
- 缩放功能正常
- 缩放级别正确显示
- 缩放范围正确（80%-150%）
- 时间轴缩放效果正确

#### 4.5 人物档案弹窗

- [ ] 测试人物链接点击
- [ ] 验证人物档案弹窗显示
- [ ] 验证人物信息显示
- [ ] 测试弹窗关闭功能

**测试方法**:
1. 点击人物链接
2. 检查人物档案弹窗
3. 检查人物信息显示
4. 点击关闭按钮

**预期结果**:
- 人物档案弹窗正常显示
- 人物信息正确显示
- 弹窗关闭功能正常

#### 4.6 用户登录界面

- [ ] 测试登录弹窗显示
- [ ] 验证登录表单
- [ ] 测试登录功能
- [ ] 验证登录后状态更新

**测试方法**:
1. 点击登录按钮
2. 填写登录表单
3. 提交登录
4. 检查登录状态

**预期结果**:
- 登录弹窗正常显示
- 登录表单正常
- 登录功能正常
- 登录后状态正确更新

#### 4.7 用户注册界面

- [ ] 测试注册弹窗显示
- [ ] 验证注册表单
- [ ] 测试注册功能
- [ ] 验证头像选择功能

**测试方法**:
1. 点击注册按钮
2. 填写注册表单
3. 选择头像
4. 提交注册

**预期结果**:
- 注册弹窗正常显示
- 注册表单正常
- 注册功能正常
- 头像选择功能正常

#### 4.8 收藏功能

- [ ] 测试收藏按钮显示
- [ ] 验证收藏状态切换
- [ ] 测试收藏列表显示
- [ ] 验证收藏删除功能

**测试方法**:
1. 点击事件卡片
2. 点击收藏按钮
3. 检查收藏状态
4. 查看收藏列表

**预期结果**:
- 收藏按钮正常显示
- 收藏状态正常切换
- 收藏列表正常显示
- 收藏删除功能正常

---

### 5. 集成测试

#### 5.1 CORS 配置测试

- [ ] 测试前端到后端的跨域请求
- [ ] 验证 CORS 头部设置
- [ ] 测试 OPTIONS 请求

**测试方法**:
1. 在前端页面访问后端 API
2. 检查网络请求
3. 验证 CORS 头部

**预期结果**:
- 跨域请求正常
- CORS 头部正确设置
- OPTIONS 请求正常

#### 5.2 前后端集成测试

- [ ] 测试前端调用后端 API
- [ ] 验证 Token 传递
- [ ] 验证数据同步
- [ ] 测试错误处理

**测试方法**:
1. 在前端页面执行用户操作
2. 检查 API 调用
3. 验证数据同步
4. 测试错误处理

**预期结果**:
- 前后端集成正常
- Token 正确传递
- 数据正确同步
- 错误正确处理

---

### 6. 性能测试

#### 6.1 页面加载性能

- [ ] 测试前端页面加载时间
- [ ] 测试静态资源加载时间
- [ ] 测试 JavaScript 执行时间

**测试方法**:
1. 使用浏览器开发者工具
2. 检查页面加载时间
3. 检查静态资源加载时间
4. 检查 JavaScript 执行时间

**预期结果**:
- 页面加载时间 < 3 秒
- 静态资源加载时间 < 2 秒
- JavaScript 执行时间 < 1 秒

#### 6.2 API 响应性能

- [ ] 测试 API 响应时间
- [ ] 测试数据库查询时间
- [ ] 测试缓存命中率

**测试方法**:
1. 使用 curl 或 Postman 测试 API
2. 检查响应时间
3. 检查数据库查询时间
4. 检查缓存命中率

**预期结果**:
- API 响应时间 < 1 秒
- 数据库查询时间 < 500ms
- 缓存命中率 > 80%

---

### 7. 安全测试

#### 7.1 输入验证测试

- [ ] 测试用户名输入验证
- [ ] 测试邮箱输入验证
- [ ] 测试密码输入验证
- [ ] 测试 SQL 注入防护

**测试方法**:
1. 输入无效的用户名
2. 输入无效的邮箱
3. 输入无效的密码
4. 尝试 SQL 注入攻击

**预期结果**:
- 输入验证正常
- 无效输入被拒绝
- SQL 注入攻击被阻止

#### 7.2 认证安全测试

- [ ] 测试 Token 验证
- [ ] 测试过期 Token 处理
- [ ] 测试无效 Token 处理
- [ ] 测试密码加密

**测试方法**:
1. 使用无效 Token 访问 API
2. 使用过期 Token 访问 API
3. 检查密码加密

**预期结果**:
- Token 验证正常
- 过期 Token 被拒绝
- 无效 Token 被拒绝
- 密码正确加密

---

### 8. 响应式设计测试

#### 8.1 移动端测试

- [ ] 测试移动端页面布局
- [ ] 测试触摸操作
- [ ] 测试导航栏响应式
- [ ] 测试时间轴响应式

**测试方法**:
1. 使用浏览器开发者工具模拟移动端
2. 测试页面布局
3. 测试触摸操作
4. 测试导航栏和时间轴

**预期结果**:
- 移动端布局正常
- 触摸操作正常
- 导航栏响应式正常
- 时间轴响应式正常

#### 8.2 平板设备测试

- [ ] 测试平板设备页面布局
- [ ] 测试事件卡片显示
- [ ] 测试模态框显示

**测试方法**:
1. 使用浏览器开发者工具模拟平板
2. 测试页面布局
3. 测试事件卡片
4. 测试模态框

**预期结果**:
- 平板设备布局正常
- 事件卡片显示正常
- 模态框显示正常

#### 8.3 大屏幕测试

- [ ] 测试大屏幕页面布局
- [ ] 测试事件卡片显示
- [ ] 测试模态框显示

**测试方法**:
1. 使用大屏幕设备
2. 测试页面布局
3. 测试事件卡片
4. 测试模态框

**预期结果**:
- 大屏幕布局正常
- 事件卡片显示正常
- 模态框显示正常

---

## 📊 测试结果

### 测试统计

| 测试类别 | 总测试数 | 通过测试数 | 失败测试数 | 通过率 |
| -------- | ------- | --------- | --------- | ------ |
| 基础可访问性 | 2 | 0 | 2 | 0% |
| 用户认证功能 | 3 | 0 | 3 | 0% |
| 收藏功能 | 3 | 0 | 3 | 0% |
| 前端功能 | 8 | 0 | 8 | 0% |
| 集成测试 | 2 | 0 | 2 | 0% |
| 性能测试 | 2 | 0 | 2 | 0% |
| 安全测试 | 2 | 0 | 2 | 0% |
| 响应式设计测试 | 3 | 0 | 3 | 0% |
| **总计** | **25** | **0** | **25** | **0%** |

### 测试问题

#### 网络连接问题

**问题描述**:
- 无法连接到 GitHub Pages 前端地址
- 无法连接到 Vercel 后端 API 地址
- 测试脚本超时

**可能原因**:
1. 网络连接问题
2. 防火墙阻止
3. DNS 解析问题
4. 服务器未正确部署

**解决方案**:
1. 检查网络连接
2. 检查防火墙设置
3. 检查 DNS 配置
4. 验证服务器部署状态

---

## 🎯 优化建议

### 1. 部署优化

- [ ] 验证 GitHub Pages 部署配置
- [ ] 验证 Vercel 部署配置
- [ ] 检查环境变量配置
- [ ] 验证域名解析

### 2. 性能优化

- [ ] 实现图片懒加载
- [ ] 优化静态资源加载
- [ ] 实现 CDN 加速
- [ ] 优化数据库查询

### 3. 用户体验优化

- [ ] 优化加载状态提示
- [ ] 优化错误提示
- [ ] 优化动画效果
- [ ] 优化移动端体验

---

## 📝 测试结论

### 测试状态

由于网络连接问题，无法完成云端应用的完整测试。所有测试用例已准备就绪，需要在网络连接正常后执行。

### 下一步行动

1. **解决网络连接问题**
   - 检查网络配置
   - 验证防火墙设置
   - 测试域名解析

2. **完成云端应用测试**
   - 执行所有测试用例
   - 记录测试结果
   - 修复发现的问题

3. **性能优化**
   - 优化页面加载速度
   - 优化 API 响应时间
   - 优化数据库查询

4. **用户体验优化**
   - 优化加载状态提示
   - 优化错误提示
   - 优化动画效果

---

## 🔗 相关文档

- [项目追踪表](file:///e:\Program\test01.trae\documents\项目追踪表.md)
- [优化总结](file:///e:\Program\test01.trae\documents\优化总结_20260120.md)
- [历史年表网站项目规划](file:///e:\Program\test01.trae\documents\历史年表网站项目规划.md)

---

**测试完成日期**: 待定  
**测试人员**: AI Assistant  
**项目状态**: 进行中（90% 完成）
